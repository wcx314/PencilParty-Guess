<template>
  <view class="container">
    <!-- èƒŒæ™¯è£…é¥° -->
    <view class="bg-decoration">
      <view class="bg-circle circle-1"></view>
      <view class="bg-circle circle-2"></view>
      <view class="bg-circle circle-3"></view>
      <view class="bg-circle circle-4"></view>
    </view>
    
    <!-- é¡¶éƒ¨çŠ¶æ€æ å ä½ -->
    <view class="status-bar"></view>
    
    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <view class="main-content">
      <!-- å¤´éƒ¨ä¿¡æ¯ -->
      <view class="header">
        <view class="user-info">
          <view class="avatar">
            <image class="avatar-img" src="/static/logo.png" mode="aspectFit"></image>
          </view>
          <view class="user-details">
            <text class="username">ç©å®¶æ˜µç§°</text>
            <text class="user-level">Lv.1</text>
          </view>
        </view>
        <view class="header-actions">
          <view class="action-btn" @click="showProfile">
            <text class="action-icon">ğŸ‘¤</text>
          </view>
          <view class="action-btn" @click="showSettings">
            <text class="action-icon">âš™ï¸</text>
          </view>
        </view>
      </view>
      
      <!-- æ¬¢è¿æ ‡è¯­ -->
      <view class="welcome-section">
        <text class="welcome-title">æ¬¢è¿æ¥åˆ°æ¸¸æˆå¤§å…</text>
        <text class="welcome-subtitle">é€‰æ‹©ä½ å–œæ¬¢çš„æ¸¸æˆï¼Œå¼€å§‹ç²¾å½©çš„æ´¾å¯¹æ—¶å…‰ï¼</text>
      </view>
      
      <!-- æ¸¸æˆåˆ—è¡¨ -->
      <view class="games-section">
        <view class="section-title">
          <text class="title-text">çƒ­é—¨æ¸¸æˆ</text>
          <view class="title-decoration"></view>
        </view>
        
        <view class="games-grid">
          <!-- ä½ ç”»æˆ‘çŒœ -->
          <view class="game-card" @click="enterGame('draw-guess')">
            <view class="game-header">
              <view class="game-icon draw-icon">ğŸ¨</view>
              <view class="game-badge hot">çƒ­é—¨</view>
            </view>
            <view class="game-content">
              <text class="game-title">ä½ ç”»æˆ‘çŒœ</text>
              <text class="game-desc">å‘æŒ¥æƒ³è±¡åŠ›ï¼Œç”»å‡ºç²¾å½©ä½œå“</text>
              <view class="game-stats">
                <view class="stat-item">
                  <text class="stat-icon">ğŸ‘¥</text>
                  <text class="stat-text">2-8äºº</text>
                </view>
                <view class="stat-item">
                  <text class="stat-icon">â±ï¸</text>
                  <text class="stat-text">10åˆ†é’Ÿ</text>
                </view>
              </view>
            </view>
            <view class="game-footer">
              <view class="difficulty easy">
                <text class="difficulty-text">ç®€å•</text>
              </view>
              <text class="play-btn">å¼€å§‹æ¸¸æˆ â†’</text>
            </view>
          </view>
          
          <!-- æ¨ç®±å­ -->
          <view class="game-card" @click="enterGame('sokoban')">
            <view class="game-header">
              <view class="game-icon sokoban-icon">ğŸ“¦</view>
              <view class="game-badge puzzle">ç›Šæ™º</view>
            </view>
            <view class="game-content">
              <text class="game-title">æ¨ç®±å­</text>
              <text class="game-desc">è€ƒéªŒé€»è¾‘æ€ç»´ï¼ŒæŒ‘æˆ˜ç»å…¸å…³å¡</text>
              <view class="game-stats">
                <view class="stat-item">
                  <text class="stat-icon">ğŸ‘¤</text>
                  <text class="stat-text">å•äºº</text>
                </view>
                <view class="stat-item">
                  <text class="stat-icon">â±ï¸</text>
                  <text class="stat-text">15åˆ†é’Ÿ</text>
                </view>
              </view>
            </view>
            <view class="game-footer">
              <view class="difficulty medium">
                <text class="difficulty-text">ä¸­ç­‰</text>
              </view>
              <text class="play-btn">å¼€å§‹æ¸¸æˆ â†’</text>
            </view>
          </view>
          
          <!-- è´ªåƒè›‡ -->
          <view class="game-card" @click="enterGame('snake')">
            <view class="game-header">
              <view class="game-icon snake-icon">ğŸ</view>
              <view class="game-badge classic">ç»å…¸</view>
            </view>
            <view class="game-content">
              <text class="game-title">è´ªåƒè›‡</text>
              <text class="game-desc">é‡æ¸©ç»å…¸ï¼ŒæŒ‘æˆ˜æœ€é«˜åˆ†æ•°</text>
              <view class="game-stats">
                <view class="stat-item">
                  <text class="stat-icon">ğŸ‘¤</text>
                  <text class="stat-text">å•äºº</text>
                </view>
                <view class="stat-item">
                  <text class="stat-icon">â±ï¸</text>
                  <text class="stat-text">5åˆ†é’Ÿ</text>
                </view>
              </view>
            </view>
            <view class="game-footer">
              <view class="difficulty easy">
                <text class="difficulty-text">ç®€å•</text>
              </view>
              <text class="play-btn">å¼€å§‹æ¸¸æˆ â†’</text>
            </view>
          </view>
        </view>
      </view>
      
      <!-- åº•éƒ¨åŠŸèƒ½åŒº -->
      <view class="bottom-section">
        <view class="quick-actions">
          <view class="quick-btn" @click="showRanking">
            <text class="quick-icon">ğŸ†</text>
            <text class="quick-text">æ’è¡Œæ¦œ</text>
          </view>
          <view class="quick-btn" @click="showFriends">
            <text class="quick-icon">ğŸ‘«</text>
            <text class="quick-text">å¥½å‹</text>
          </view>
          <view class="quick-btn" @click="showShop">
            <text class="quick-icon">ğŸ›ï¸</text>
            <text class="quick-text">å•†åº—</text>
          </view>
        </view>
      </view>
    </view>
  </view>
</template>

<script>
export default {
  data() {
    return {
      userInfo: {
        username: 'ç©å®¶æ˜µç§°',
        level: 1,
        avatar: '/static/logo.png'
      }
    }
  },
  
  onLoad() {
    // è·å–ç”¨æˆ·ä¿¡æ¯
    this.loadUserInfo()
  },
  
  methods: {
    // åŠ è½½ç”¨æˆ·ä¿¡æ¯
    loadUserInfo() {
      // è¿™é‡Œå¯ä»¥ä»æœ¬åœ°å­˜å‚¨æˆ–åç«¯è·å–ç”¨æˆ·ä¿¡æ¯
      const userInfo = uni.getStorageSync('userInfo')
      if (userInfo) {
        this.userInfo = { ...this.userInfo, ...userInfo }
      }
    },
    
    // è¿›å…¥æ¸¸æˆ
    enterGame(gameType) {
      uni.showLoading({
        title: 'æ­£åœ¨è¿›å…¥æ¸¸æˆ...'
      })
      
      setTimeout(() => {
        uni.hideLoading()
        uni.showToast({
          title: `${this.getGameName(gameType)}æ¸¸æˆå¼€å‘ä¸­`,
          icon: 'none'
        })
        
        // è¿™é‡Œå¯ä»¥è·³è½¬åˆ°å…·ä½“çš„æ¸¸æˆé¡µé¢
        // uni.navigateTo({
        //   url: `/pages/games/${gameType}/${gameType}`
        // })
      }, 1000)
    },
    
    // è·å–æ¸¸æˆåç§°
    getGameName(gameType) {
      const gameNames = {
        'draw-guess': 'ä½ ç”»æˆ‘çŒœ',
        'sokoban': 'æ¨ç®±å­',
        'snake': 'è´ªåƒè›‡'
      }
      return gameNames[gameType] || 'æœªçŸ¥æ¸¸æˆ'
    },
    
    // æ˜¾ç¤ºä¸ªäººèµ„æ–™
    showProfile() {
      uni.navigateTo({
        url: '/pages/profile/profile'
      })
    },
    
    // æ˜¾ç¤ºè®¾ç½®
    showSettings() {
      uni.navigateTo({
        url: '/pages/settings/settings'
      })
    },
    
    // æ˜¾ç¤ºæ’è¡Œæ¦œ
    showRanking() {
      uni.showToast({
        title: 'æ’è¡Œæ¦œé¡µé¢å¼€å‘ä¸­',
        icon: 'none'
      })
    },
    
    // æ˜¾ç¤ºå¥½å‹
    showFriends() {
      uni.showToast({
        title: 'å¥½å‹é¡µé¢å¼€å‘ä¸­',
        icon: 'none'
      })
    },
    
    // æ˜¾ç¤ºå•†åº—
    showShop() {
      uni.showToast({
        title: 'å•†åº—é¡µé¢å¼€å‘ä¸­',
        icon: 'none'
      })
    }
  }
}
</script>

<style>
/* å…¨å±€æ ·å¼é‡ç½® */
page {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  height: 100vh;
  overflow: hidden;
}

.container {
  position: relative;
  width: 100%;
  height: 100vh;
  display: flex;
  flex-direction: column;
}

/* èƒŒæ™¯è£…é¥° */
.bg-decoration {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 1;
}

.bg-circle {
  position: absolute;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.1);
}

.circle-1 {
  width: 300rpx;
  height: 300rpx;
  top: -100rpx;
  right: -100rpx;
  animation: float 6s ease-in-out infinite;
}

.circle-2 {
  width: 200rpx;
  height: 200rpx;
  bottom: 100rpx;
  left: -50rpx;
  animation: float 8s ease-in-out infinite reverse;
}

.circle-3 {
  width: 150rpx;
  height: 150rpx;
  top: 50%;
  right: 10%;
  animation: float 7s ease-in-out infinite;
}

.circle-4 {
  width: 100rpx;
  height: 100rpx;
  top: 30%;
  left: 5%;
  animation: float 9s ease-in-out infinite reverse;
}

@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

/* çŠ¶æ€æ å ä½ */
.status-bar {
  height: var(--status-bar-height, 44px);
  width: 100%;
}

/* ä¸»è¦å†…å®¹åŒºåŸŸ */
.main-content {
  flex: 1;
  padding: 0 30rpx;
  padding-bottom: 30rpx;
  z-index: 10;
  overflow-y: auto;
}

/* å¤´éƒ¨æ ·å¼ */
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 40rpx;
  padding: 20rpx 0;
}

.user-info {
  display: flex;
  align-items: center;
}

.avatar {
  width: 80rpx;
  height: 80rpx;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.2);
  display: flex;
  align-items: center;
  justify-content: center;
  margin-right: 20rpx;
}

.avatar-img {
  width: 60rpx;
  height: 60rpx;
  border-radius: 50%;
}

.user-details {
  display: flex;
  flex-direction: column;
}

.username {
  font-size: 32rpx;
  font-weight: 600;
  color: #ffffff;
  margin-bottom: 5rpx;
}

.user-level {
  font-size: 24rpx;
  color: rgba(255, 255, 255, 0.8);
  background: rgba(255, 255, 255, 0.2);
  padding: 4rpx 12rpx;
  border-radius: 12rpx;
}

.header-actions {
  display: flex;
  gap: 20rpx;
}

.action-btn {
  width: 60rpx;
  height: 60rpx;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s ease;
}

.action-btn:active {
  transform: scale(0.95);
  background: rgba(255, 255, 255, 0.3);
}

.action-icon {
  font-size: 28rpx;
}

/* æ¬¢è¿åŒºåŸŸ */
.welcome-section {
  text-align: center;
  margin-bottom: 50rpx;
}

.welcome-title {
  display: block;
  font-size: 40rpx;
  font-weight: bold;
  color: #ffffff;
  margin-bottom: 15rpx;
  text-shadow: 0 2rpx 4rpx rgba(0, 0, 0, 0.3);
}

.welcome-subtitle {
  display: block;
  font-size: 28rpx;
  color: rgba(255, 255, 255, 0.8);
  line-height: 1.4;
}

/* æ¸¸æˆåŒºåŸŸ */
.games-section {
  margin-bottom: 50rpx;
}

.section-title {
  text-align: center;
  margin-bottom: 40rpx;
  position: relative;
}

.title-text {
  font-size: 36rpx;
  font-weight: 600;
  color: #ffffff;
  position: relative;
  z-index: 2;
}

.title-decoration {
  position: absolute;
  bottom: -10rpx;
  left: 50%;
  transform: translateX(-50%);
  width: 100rpx;
  height: 6rpx;
  background: linear-gradient(90deg, #ffd89b 0%, #19547b 100%);
  border-radius: 3rpx;
}

/* æ¸¸æˆç½‘æ ¼ */
.games-grid {
  display: flex;
  flex-direction: column;
  gap: 30rpx;
}

/* æ¸¸æˆå¡ç‰‡ */
.game-card {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10rpx);
  border-radius: 25rpx;
  padding: 30rpx;
  box-shadow: 0 15rpx 40rpx rgba(0, 0, 0, 0.2);
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
}

.game-card:active {
  transform: translateY(-5rpx);
  box-shadow: 0 20rpx 50rpx rgba(0, 0, 0, 0.3);
}

.game-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 6rpx;
  background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
}

.game-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20rpx;
}

.game-icon {
  width: 80rpx;
  height: 80rpx;
  border-radius: 20rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 40rpx;
}

.draw-icon {
  background: linear-gradient(135deg, #ff6b6b, #feca57);
}

.sokoban-icon {
  background: linear-gradient(135deg, #48dbfb, #0abde3);
}

.snake-icon {
  background: linear-gradient(135deg, #1dd1a1, #10ac84);
}

.game-badge {
  padding: 8rpx 16rpx;
  border-radius: 15rpx;
  font-size: 20rpx;
  font-weight: 600;
  color: #ffffff;
}

.hot {
  background: linear-gradient(135deg, #ff6b6b, #ee5a24);
}

.puzzle {
  background: linear-gradient(135deg, #48dbfb, #0abde3);
}

.classic {
  background: linear-gradient(135deg, #1dd1a1, #10ac84);
}

.game-content {
  margin-bottom: 25rpx;
}

.game-title {
  display: block;
  font-size: 32rpx;
  font-weight: 600;
  color: #333;
  margin-bottom: 10rpx;
}

.game-desc {
  display: block;
  font-size: 26rpx;
  color: #666;
  line-height: 1.4;
  margin-bottom: 20rpx;
}

.game-stats {
  display: flex;
  gap: 30rpx;
}

.stat-item {
  display: flex;
  align-items: center;
  gap: 8rpx;
}

.stat-icon {
  font-size: 24rpx;
}

.stat-text {
  font-size: 24rpx;
  color: #666;
}

.game-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.difficulty {
  padding: 6rpx 12rpx;
  border-radius: 10rpx;
  font-size: 20rpx;
  font-weight: 600;
}

.easy {
  background: rgba(29, 209, 161, 0.2);
  color: #10ac84;
}

.medium {
  background: rgba(254, 202, 87, 0.2);
  color: #f39c12;
}

.difficulty-text {
  font-size: 20rpx;
}

.play-btn {
  font-size: 28rpx;
  font-weight: 600;
  color: #667eea;
  transition: all 0.3s ease;
}

/* åº•éƒ¨åŠŸèƒ½åŒº */
.bottom-section {
  margin-top: auto;
  padding-top: 30rpx;
}

.quick-actions {
  display: flex;
  justify-content: space-around;
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10rpx);
  border-radius: 20rpx;
  padding: 30rpx 20rpx;
}

.quick-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10rpx;
  transition: all 0.3s ease;
}

.quick-btn:active {
  transform: scale(0.95);
}

.quick-icon {
  font-size: 36rpx;
}

.quick-text {
  font-size: 24rpx;
  color: rgba(255, 255, 255, 0.9);
}

/* å“åº”å¼è®¾è®¡ */
@media screen and (max-width: 400px) {
  .main-content {
    padding: 0 20rpx;
  }
  
  .game-card {
    padding: 25rpx;
  }
  
  .welcome-title {
    font-size: 36rpx;
  }
  
  .game-title {
    font-size: 30rpx;
  }
}
</style>